%
\documentclass{llncs}
%
\usepackage{makeidx}  % allows for indexgeneration
\usepackage{listings}
\usepackage{color}
\usepackage{xspace}
\usepackage{times}
\usepackage{comment}
\usepackage{rotating} 
\lstset{language=Java,
  basicstyle=\ttfamily\small,%\scriptsize,
  keywordstyle=\bfseries,%\color{darkRed},
  showstringspaces=false,
  mathescape=true,
  xleftmargin=0pt,
  xrightmargin=0pt,
  breaklines=false,
  breakatwhitespace=false,
  breakautoindent=false,
  linewidth=4\textwidth,% should be enough
%  identifierstyle=\idstyle
 morekeywords={method,Use,This}
}
%
\newcommand\Rotated[1]{\begin{turn}{90}\begin{minipage}{12em}#1\end{minipage}\end{turn}}
%
%marco
\newcommand{\Q}{\lstinline}
\newcommand\Opt[1]{#1 ?}
%bnf
\newenvironment{bnf}{$\begin{array}{lcll}}{\end{array}$}
\newcommand{\prodFull}[3]{#1&::=&#2&\mbox{#3}}
%\newcommand{\prodFull}[3]{#1&::=&\mbox{#2}&\mbox{#3}}
\newcommand{\prodInline}[2]{#1::=#2}
\newcommand{\prodNextLine}[2]{&&#1&\mbox{#2}}
\newcommand{\terminal}[1]{%
\ensuremath{$\texttt{#1}$}%
}
\newcommand{\terminalCode}[1]{\mbox{\lstinline{#1}}}
\newcommand{\metavariable}[1]{%
\ensuremath{\mathit{#1}}%
}
%----------------------
\newcommand\mL{\metavariable{L}}
\newcommand\mC{\metavariable{C}}
\newcommand\mT{\metavariable{T}}
\newcommand\mV{\metavariable{V}} %code value t or L
\newcommand\mMD{\metavariable{MD}}
\newcommand\mTD{\metavariable{TD}}
\newcommand\mCD{\metavariable{CD}}
\newcommand\mD{\metavariable{D}}
\newcommand\me{\metavariable{e}}
\newcommand\mx{\metavariable{x}}
\newcommand\mm{\metavariable{m}}
\newcommand\mt{\metavariable{t}}
\newcommand\use{\terminalCode{Use}}
\newcommand\oC{\mbox{\lstinline@{@}}
\newcommand\cC{\mbox{\lstinline@}@}}
\newcommand\oR{\mbox{\lstinline@(@}}
\newcommand\cR{\mbox{\lstinline@)@}}
%--------------------------
\newcommand{\mynotes}[3]{{\color{#2} {\sc #1}: #3}}
\newcommand\bruno[1]{\mynotes{Bruno}{red}{#1}}
\newcommand\marco[1]{\mynotes{Marco}{blue}{#1}}

\newcommand{\syndef}{$::=$}

\newcommand\name{{\bf $42_{\mu}$}\xspace}

%
\begin{document}
%
\frontmatter          % for the preliminaries
%
\pagestyle{headings}  % switches on printing of running heads
%\addtocmark{Hamiltonian Mechanics} % additional mark in the TOC
%

\title{Separating Use and Reuse to Improve Both}
%
\titlerunning{Separating Use and Reuse to Improve Both}  % abbreviated title (for running head)

\author{Marco Servetto\inst{1} \and Bruno C. d. S. Oliveira\inst{2}}
%
\authorrunning{M. Servetto and B. Oliveira} % abbreviated author list (for running head)
%
%%%% list of authors for the TOC (use if author list has to be modified)
\tocauthor{Marco Servetto and Bruno C. d. S. Oliveira}
%
\institute{Victoria University of Wellington, New Zealand,\\
\email{marco.servetto@ecs.vuw.ac.nz},\\ WWW home page:
\texttt{https://ecs.victoria.ac.nz/Main/MarcoServetto}
\and
The University of Hong Kong, Hong Kong\\}

\maketitle              % typeset the title of the contribution

\begin{abstract}
In most object oriented languages subclassing/inheritance implies
subtyping. This is considered by many a conceptual design error, but it
seems required for technical reasons, due to what we call the
\emph{this-leaking problem}. The this-leaking problem shows that separating
code-reuse from subtyping is non-trivial and requires a significant
departure from the OO models in existing mainstream OO languages.
We are aware of at least 3 independently designed research languages 
that address this limitation:Delta-Trait, Package Template, DeepFjig.
Leveraging on \emph{traits}, in this work we aim to synthesize
the main ideas of those very different language designs.
Our result is a nominally typed minimalist language, natural to OO programmers.
By making our type system distinguish between code-use and code-reuse
we can separate inheritance and subtyping, while avoiding 
redundant abstract declarations (required in Delta-Trait and
DeepFjig). At the same time self construction,
binary methods and recursive types are also supported.
Moreover, we provide a novel and elegant solution to uniformly
handle behavior and state within trait composition.
These ideas have been implemented in the 42 language, which we use 
throughout the paper for code examples.

\begin{comment}
Two distinct groups of researchers independently [.marco..] and
[..ferruccio.] used traits to provide
a sound language design where code-reuse and subtyping are decoupled.
In this work we distill their work in a simpler model that is far more
natural for a OO programmer.
For example, in [ marco ] class A {A m(){return this;}} is not well typed code,
and in [.ferruccio..] all the logic about object construction have to
be provided after all trait composition.

We provide an novel and elegant solution to uniformly handle behavior
and state within trait composition,
Making our type system distinguish between used code and reused code
we  can avoid many redundant
abstract declarations that was required by [ marco ] and [ ferruccio ],
while supporting self construction, binary methods and recursive types;

We then show that our model can easily support nested classes and a
rich composition algebra as in [ marco ]
\end{comment}

\keywords{Code Reuse, Object-Oriented Programming}
\end{abstract}

\input{Intro}
\input{section2}
\input{section3}
\input{section4}
\input{Examples}
%\input{Extensions}
\input{RelatedWork}
\input{Conclusion}

\section*{Bibliography}
\bibliographystyle{plain}
\bibliography{main}

\end{document}
